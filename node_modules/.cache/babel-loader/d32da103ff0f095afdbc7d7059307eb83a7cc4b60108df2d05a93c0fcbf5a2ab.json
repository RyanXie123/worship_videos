{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\n// import {join} from 'path';\nexport default {\n  data() {\n    return {\n      videos: [],\n      host: 'https://router.xieru.fun:12315/',\n      apiPath: 'api/fs/list',\n      // currentPath:'/tianyi/study/赞美/赞美之泉/讚美之泉敬拜讚美專輯(01) 讓讚美飛揚 Let Praise Arise',\n      currentPath: '/tianyi/study/赞美/',\n      indexPath: '/tianyi/study/赞美/'\n    };\n  },\n  watch: {\n    '$route': {\n      handler: 'resetData',\n      immediate: true\n    }\n  },\n  mounted() {\n    this.resetData();\n    // if(this.$route.query && this.$route.query.folder_path) {\n    //   this.currentPath = this.$route.query.folder_path;\n    // }\n    // const requestData = {\n    //   path: this.currentPath,\n    //   password: \"\",\n    //   page: 1,\n    //   per_page: 0,\n    //   refresh: false\n    // };\n\n    // axios.post(this.host+this.apiPath, requestData)\n    //   .then(response => {\n    //     this.videos = response.data.data.content;\n    //   })\n    //   .catch(error => {\n    //     console.error(error);\n    //   });\n  },\n  methods: {\n    formatDate(dateString) {\n      const date = new Date(dateString);\n      return date.toLocaleDateString();\n    },\n    scrollToTop() {\n      window.scrollTo({\n        top: 0\n        // behavior: \"smooth\" // 可以使滚动过程平滑\n      });\n    },\n    resetData() {\n      if (this.$route.query && this.$route.query.folder_path) {\n        this.currentPath = this.$route.query.folder_path;\n      } else {\n        this.currentPath = this.indexPath;\n      }\n      const requestData = {\n        path: this.currentPath,\n        password: \"\",\n        page: 1,\n        per_page: 0,\n        refresh: false\n      };\n      axios.post(this.host + this.apiPath, requestData).then(response => {\n        this.videos = response.data.data.content;\n        this.scrollToTop();\n      }).catch(error => {\n        console.error(error);\n      });\n    },\n    getThumbnail(video) {\n      if (video.thumb === '') {\n        // 如果thumb为空字符串，返回项目内的默认图片路径\n        return \"https://router.xieru.fun:12315/d/tianyi/projects/thumbs/%E5%AE%89%E9%9D%99%E7%B3%BB%E5%88%97.jpg\";\n      } else {\n        return video.thumb;\n      }\n    },\n    navigateToVideo(video) {\n      console.log(video);\n      if (video.is_dir) {\n        console.log(\"xxx\");\n        this.$router.push({\n          name: 'VideoGrid',\n          query: {\n            folder_path: this.currentPath + video.name + '/'\n          }\n        });\n      } else {\n        console.log('push');\n        console.log(this.$router);\n        // var url =  join(this.host,\"d\",this.currentPath,video.name);\n        var url = this.host + \"d\" + this.currentPath + \"/\" + video.name;\n        this.$router.push({\n          name: 'VideoPlayer',\n          query: {\n            video: video.name,\n            page: 1,\n            video_url: url\n          }\n        });\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","data","videos","host","apiPath","currentPath","indexPath","watch","handler","immediate","mounted","resetData","methods","formatDate","dateString","date","Date","toLocaleDateString","scrollToTop","window","scrollTo","top","$route","query","folder_path","requestData","path","password","page","per_page","refresh","post","then","response","content","catch","error","console","getThumbnail","video","thumb","navigateToVideo","log","is_dir","$router","push","name","url","video_url"],"sources":["/home/worship_video/src/components/VideoGrid.vue"],"sourcesContent":["<template>\n  <div class=\"video-grid\">\n    <div class=\"video-item\" v-for=\"video in videos\" :key=\"video.name\" @click=\"navigateToVideo(video)\">\n      <img :src=\"getThumbnail(video)\" alt=\"Video Thumbnail\" class=\"video-thumbnail\" />\n      <div class=\"video-info\">\n        <h3 class=\"video-name\">{{ video.name }}</h3>\n        <!-- <p class=\"video-date\">Created: {{ formatDate(video.created) }}</p> -->\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\n// import {join} from 'path';\nexport default {\n  data() {\n    return {\n      videos: [],\n      host: 'https://router.xieru.fun:12315/',\n      apiPath: 'api/fs/list',\n      // currentPath:'/tianyi/study/赞美/赞美之泉/讚美之泉敬拜讚美專輯(01) 讓讚美飛揚 Let Praise Arise',\n      currentPath: '/tianyi/study/赞美/',\n      indexPath: '/tianyi/study/赞美/'\n    };\n  },\n  watch: {\n    '$route': {\n      handler: 'resetData',\n      immediate: true\n    }\n  }\n  ,\n  mounted() {\n    this.resetData();\n    // if(this.$route.query && this.$route.query.folder_path) {\n    //   this.currentPath = this.$route.query.folder_path;\n    // }\n    // const requestData = {\n    //   path: this.currentPath,\n    //   password: \"\",\n    //   page: 1,\n    //   per_page: 0,\n    //   refresh: false\n    // };\n\n    // axios.post(this.host+this.apiPath, requestData)\n    //   .then(response => {\n    //     this.videos = response.data.data.content;\n    //   })\n    //   .catch(error => {\n    //     console.error(error);\n    //   });\n  },\n  methods: {\n    formatDate(dateString) {\n      const date = new Date(dateString);\n      return date.toLocaleDateString();\n    },\n    scrollToTop() {\n      window.scrollTo({\n        top: 0,\n        // behavior: \"smooth\" // 可以使滚动过程平滑\n      });\n    },\n    resetData() {\n      if (this.$route.query && this.$route.query.folder_path) {\n        this.currentPath = this.$route.query.folder_path;\n      } else {\n        this.currentPath = this.indexPath;\n      }\n      const requestData = {\n        path: this.currentPath,\n        password: \"\",\n        page: 1,\n        per_page: 0,\n        refresh: false\n      };\n\n      axios.post(this.host + this.apiPath, requestData)\n        .then(response => {\n          this.videos = response.data.data.content;\n          this.scrollToTop();\n        })\n        .catch(error => {\n          console.error(error);\n        });\n    },\n    getThumbnail(video) {\n      if (video.thumb === '') {\n        // 如果thumb为空字符串，返回项目内的默认图片路径\n        return \"https://router.xieru.fun:12315/d/tianyi/projects/thumbs/%E5%AE%89%E9%9D%99%E7%B3%BB%E5%88%97.jpg\";\n      } else {\n        return video.thumb;\n      }\n    },\n    navigateToVideo(video) {\n      console.log(video)\n      if (video.is_dir) {\n        console.log(\"xxx\")\n        this.$router.push({ name: 'VideoGrid', query: { folder_path: this.currentPath + video.name + '/' } });\n      } else {\n        console.log('push');\n        console.log(this.$router);\n        // var url =  join(this.host,\"d\",this.currentPath,video.name);\n        var url = this.host + \"d\" + this.currentPath + \"/\" + video.name;\n\n        this.$router.push({ name: 'VideoPlayer', query: { video: video.name, page: 1, video_url: url } });\n      }\n    },\n  },\n};\n\n</script>\n\n<style scoped>\n.video-grid {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  /* 将网格分为两列，每列平均占据剩余空间 */\n  gap: 20px;\n  /* 设置列间隔，根据需要进行调整 */\n}\n\n.video-item {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.video-thumbnail {\n  width: 100%;\n  height: auto;\n  object-fit: cover;\n  border-radius: 5px;\n}\n\n.video-info {\n  margin-top: 0px;\n  text-align: center;\n}\n\n.video-name {\n  font-size: 12px;\n  font-weight: normal;\n}\n\n.video-date,\n.video-size {\n  font-size: 14px;\n  margin-top: 5px;\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}