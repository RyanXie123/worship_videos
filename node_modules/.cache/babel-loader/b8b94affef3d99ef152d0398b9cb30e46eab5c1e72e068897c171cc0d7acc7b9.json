{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\n// import {join} from 'path';\nexport default {\n  data() {\n    return {\n      videos: [],\n      thumbs: [],\n      host: 'https://router.xieru.fun:12315/',\n      apiPath: 'api/fs/list',\n      // currentPath:'/tianyi/study/赞美/赞美之泉/讚美之泉敬拜讚美專輯(01) 讓讚美飛揚 Let Praise Arise',\n      currentPath: '/tianyi/study/赞美/',\n      indexPath: '/tianyi/study/赞美/'\n    };\n  },\n  watch: {\n    '$route': {\n      handler: 'resetData',\n      immediate: true\n    }\n  },\n  mounted() {\n    this.resetData();\n    // if(this.$route.query && this.$route.query.folder_path) {\n    //   this.currentPath = this.$route.query.folder_path;\n    // }\n    // const requestData = {\n    //   path: this.currentPath,\n    //   password: \"\",\n    //   page: 1,\n    //   per_page: 0,\n    //   refresh: false\n    // };\n\n    // axios.post(this.host+this.apiPath, requestData)\n    //   .then(response => {\n    //     this.videos = response.data.data.content;\n    //   })\n    //   .catch(error => {\n    //     console.error(error);\n    //   });\n  },\n  methods: {\n    formatDate(dateString) {\n      const date = new Date(dateString);\n      return date.toLocaleDateString();\n    },\n    scrollToTop() {\n      window.scrollTo({\n        top: 0\n        // behavior: \"smooth\" // 可以使滚动过程平滑\n      });\n    },\n    resetData() {\n      if (this.$route.query && this.$route.query.folder_path) {\n        this.currentPath = this.$route.query.folder_path;\n      } else {\n        this.currentPath = this.indexPath;\n      }\n      const requestData = {\n        path: this.currentPath,\n        password: \"\",\n        page: 1,\n        per_page: 0,\n        refresh: false\n      };\n      axios.post(this.host + this.apiPath, requestData).then(response => {\n        var itemList = response.data.data.content;\n        var videos = [];\n        var thumbs = [];\n        //遍历\n        for (var i = 0; i < itemList.length; i++) {\n          //判断是否为mp4结尾\n          if (itemList[i].name.endsWith(\".mp4\") || itemList[i].is_dir) {\n            videos.push(itemList[i]);\n          }\n          if (itemList[i].name.endsWith(\".jpg\") || itemList[i].name.endsWith(\".webp\")) {\n            thumbs.push(itemList[i]);\n          }\n          //判断是否已\n        }\n        this.videos = videos;\n        this.thumbs = thumbs;\n        console.log(\"thumbs:\");\n        console.log(thumbs);\n        this.scrollToTop();\n      }).catch(error => {\n        console.error(error);\n      });\n    },\n    getThumbnail(video) {\n      var videoName = this.getVideoName(video);\n      if (video.is_dir) {\n        return \"https://router.xieru.fun:12315/d/tianyi/projects/thumbs/%E5%AE%89%E9%9D%99%E7%B3%BB%E5%88%97.jpg\";\n      } else {\n        var thumbNail = \"\";\n        for (var i = 0; i < this.thumbs.length; i++) {\n          if (this.thumbs[i].name.includes(videoName) != -1) {\n            thumbNail = this.host + \"d\" + this.currentPath + \"/\" + this.thumbs[i].name;\n            break;\n          }\n        }\n        if (thumbNail == \"\") {\n          thumbNail = \"https://router.xieru.fun:12315/d/tianyi/projects/thumbs/%E5%AE%89%E9%9D%99%E7%B3%BB%E5%88%97.jpg\";\n        }\n        return thumbNail;\n      }\n    },\n    getVideoName(video) {\n      return video.name.replace(/\\.mp4$/, \"\");\n    },\n    navigateToVideo(video) {\n      console.log(video);\n      if (video.is_dir) {\n        console.log(\"xxx\");\n        this.$router.push({\n          name: 'VideoGrid',\n          query: {\n            folder_path: this.currentPath + video.name + '/'\n          }\n        });\n      } else {\n        console.log('push');\n        console.log(this.$router);\n        // var url =  join(this.host,\"d\",this.currentPath,video.name);\n        var url = this.host + \"d\" + this.currentPath + \"/\" + video.name;\n        this.$router.push({\n          name: 'VideoPlayer',\n          query: {\n            video: video.name,\n            page: 1,\n            video_url: url\n          }\n        });\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","data","videos","thumbs","host","apiPath","currentPath","indexPath","watch","handler","immediate","mounted","resetData","methods","formatDate","dateString","date","Date","toLocaleDateString","scrollToTop","window","scrollTo","top","$route","query","folder_path","requestData","path","password","page","per_page","refresh","post","then","response","itemList","content","i","length","name","endsWith","is_dir","push","console","log","catch","error","getThumbnail","video","videoName","getVideoName","thumbNail","includes","replace","navigateToVideo","$router","url","video_url"],"sources":["/home/worship_video/src/components/VideoGrid.vue"],"sourcesContent":["<template>\n  <div class=\"video-grid\">\n    <div class=\"video-item\" v-for=\"video in videos\" :key=\"video.name\" @click=\"navigateToVideo(video)\">\n      <img :src=\"getThumbnail(video)\" alt=\"Video Thumbnail\" class=\"video-thumbnail\" />\n      <div class=\"video-info\">\n        <h3 class=\"video-name\">{{ getVideoName(video) }}</h3>\n        <!-- <p class=\"video-date\">Created: {{ formatDate(video.created) }}</p> -->\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\n// import {join} from 'path';\nexport default {\n  data() {\n    return {\n      videos: [],\n      thumbs: [],\n      host: 'https://router.xieru.fun:12315/',\n      apiPath: 'api/fs/list',\n      // currentPath:'/tianyi/study/赞美/赞美之泉/讚美之泉敬拜讚美專輯(01) 讓讚美飛揚 Let Praise Arise',\n      currentPath: '/tianyi/study/赞美/',\n      indexPath: '/tianyi/study/赞美/'\n    };\n  },\n  watch: {\n    '$route': {\n      handler: 'resetData',\n      immediate: true\n    }\n  }\n  ,\n  mounted() {\n    this.resetData();\n    // if(this.$route.query && this.$route.query.folder_path) {\n    //   this.currentPath = this.$route.query.folder_path;\n    // }\n    // const requestData = {\n    //   path: this.currentPath,\n    //   password: \"\",\n    //   page: 1,\n    //   per_page: 0,\n    //   refresh: false\n    // };\n\n    // axios.post(this.host+this.apiPath, requestData)\n    //   .then(response => {\n    //     this.videos = response.data.data.content;\n    //   })\n    //   .catch(error => {\n    //     console.error(error);\n    //   });\n  },\n  methods: {\n    formatDate(dateString) {\n      const date = new Date(dateString);\n      return date.toLocaleDateString();\n    },\n    scrollToTop() {\n      window.scrollTo({\n        top: 0,\n        // behavior: \"smooth\" // 可以使滚动过程平滑\n      });\n    },\n    resetData() {\n      if (this.$route.query && this.$route.query.folder_path) {\n        this.currentPath = this.$route.query.folder_path;\n      } else {\n        this.currentPath = this.indexPath;\n      }\n      const requestData = {\n        path: this.currentPath,\n        password: \"\",\n        page: 1,\n        per_page: 0,\n        refresh: false\n      };\n\n      axios.post(this.host + this.apiPath, requestData)\n        .then(response => {\n          var itemList = response.data.data.content;\n          var videos = [];\n          var thumbs = [];\n          //遍历\n          for (var i = 0; i < itemList.length; i++) {\n            //判断是否为mp4结尾\n            if (itemList[i].name.endsWith(\".mp4\") || itemList[i].is_dir) {\n              videos.push(itemList[i]);\n            }\n            if (itemList[i].name.endsWith(\".jpg\") || itemList[i].name.endsWith(\".webp\")) {\n              thumbs.push(itemList[i]);\n            }\n            //判断是否已\n          }\n          this.videos = videos;\n          this.thumbs = thumbs;\n          console.log(\"thumbs:\");\n          console.log(thumbs);\n          this.scrollToTop();\n        })\n        .catch(error => {\n          console.error(error);\n        });\n    },\n    getThumbnail(video) {\n      var videoName = this.getVideoName(video);\n      if (video.is_dir) {\n        return \"https://router.xieru.fun:12315/d/tianyi/projects/thumbs/%E5%AE%89%E9%9D%99%E7%B3%BB%E5%88%97.jpg\";\n      }\n      else {\n        var thumbNail = \"\";\n        for (var i = 0; i < this.thumbs.length; i++) {\n          if (this.thumbs[i].name.includes(videoName) != -1) {\n            thumbNail = this.host + \"d\" + this.currentPath + \"/\" + this.thumbs[i].name;\n            break;\n          }\n        }\n        if(thumbNail == \"\") {\n          thumbNail = \"https://router.xieru.fun:12315/d/tianyi/projects/thumbs/%E5%AE%89%E9%9D%99%E7%B3%BB%E5%88%97.jpg\";\n        }\n        return thumbNail;\n      }\n    },\n\n    getVideoName(video) {\n      return video.name.replace(/\\.mp4$/, \"\");\n    },\n    navigateToVideo(video) {\n      console.log(video)\n      if (video.is_dir) {\n        console.log(\"xxx\")\n        this.$router.push({ name: 'VideoGrid', query: { folder_path: this.currentPath + video.name + '/' } });\n      } else {\n        console.log('push');\n        console.log(this.$router);\n        // var url =  join(this.host,\"d\",this.currentPath,video.name);\n        var url = this.host + \"d\" + this.currentPath + \"/\" + video.name;\n\n        this.$router.push({ name: 'VideoPlayer', query: { video: video.name, page: 1, video_url: url } });\n      }\n    },\n  },\n};\n\n</script>\n\n<style scoped>\n.video-grid {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  /* 将网格分为两列，每列平均占据剩余空间 */\n  gap: 20px;\n  /* 设置列间隔，根据需要进行调整 */\n}\n\n.video-item {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.video-thumbnail {\n  width: 100%;\n  height: auto;\n  object-fit: cover;\n  border-radius: 5px;\n}\n\n.video-info {\n  margin-top: 0px;\n  text-align: center;\n}\n\n.video-name {\n  font-size: 12px;\n  font-weight: normal;\n}\n\n.video-date,\n.video-size {\n  font-size: 14px;\n  margin-top: 5px;\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}