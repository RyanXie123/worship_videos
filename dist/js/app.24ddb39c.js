(function(){"use strict";var e={9670:function(e,t,o){var n=o(5130),r=o(6768);const i={id:"app"};function a(e,t,o,n,a,s){const l=(0,r.g2)("router-view"),u=(0,r.g2)("AppNav");return(0,r.uX)(),(0,r.CE)("div",i,[(0,r.bF)(l),(0,r.bF)(u)])}const s=e=>((0,r.Qi)("data-v-e56a874a"),e=e(),(0,r.jt)(),e),l={class:"nav"},u={class:"nav-icons"},c=s((()=>(0,r.Lk)("i",{class:"fas fa-arrow-left"},null,-1))),h=[c],d=s((()=>(0,r.Lk)("i",{class:"fas fa-arrow-right"},null,-1))),p=[d],f=s((()=>(0,r.Lk)("i",{class:"fas fa-home"},null,-1))),v=[f],g=s((()=>(0,r.Lk)("i",{class:"fas fa-share"},null,-1))),m=[g],b={class:"nav-text"};function y(e,t,o,n,i,a){return(0,r.uX)(),(0,r.CE)("div",l,[(0,r.Lk)("div",u,[(0,r.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>a.goBack&&a.goBack(...e))},h),(0,r.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>a.goForward&&a.goForward(...e))},p),(0,r.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>a.goHome&&a.goHome(...e))},v),(0,r.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>a.share&&a.share(...e))},m)]),(0,r.Lk)("div",b,[(0,r.Lk)("button",{class:"nav-button",onClick:t[4]||(t[4]=(...e)=>a.handleButtonClick&&a.handleButtonClick(...e))},"奉献支持")])])}o(4114);var k={methods:{goBack(){window.history.back()},goForward(){window.history.forward()},goHome(){this.$router.push("/")},handleButtonClick(){window.location.href="https://qr.alipay.com/fkx123198b5yoxszv9ife12"},share(){navigator.share?navigator.share({title:document.title,url:window.location.href}).then((()=>{console.log("Sharing success")})).catch((e=>{console.error("Sharing failed:",e)})):console.log("Web Share API not supported.")}}},w=o(1241);const P=(0,w.A)(k,[["render",y],["__scopeId","data-v-e56a874a"]]);var x=P,_={name:"App",components:{AppNav:x}};const C=(0,w.A)(_,[["render",a]]);var L=C,j=o(1387);const E={class:"video-player"};function O(e,t,o,n,i,a){return(0,r.uX)(),(0,r.CE)("div",E)}var T=o(279),V=o.n(T),A={props:["video"],data(){return{videoUrl:""}},created(){},mounted(){console.log(this.$route.query),console.log("video-player mounted"),this.parseVideoInfo()},methods:{startPlaying(){const e=this.$refs.videoRef;e.play()},handlePlay(){this.isPlaying=!0},handlePause(){this.isPlaying=!1},parseVideoInfo(){this.videoUrl=this.$route.query.video_url,console.log(this.videoUrl);var e=encodeURI(this.videoUrl.replace(".mp4",".webp"));console.log(e);var t=new(V())({container:".video-player",url:this.videoUrl,airplay:!0,playsInline:!0,autoSize:!0,lock:!0,fullscreen:!0,fullscreenWeb:!0,pip:!0,autoplay:!0,poster:e,moreVideoAttr:{"webkit-playsinline":!0,playsInline:!0},fastForward:!0,autoPlayback:!0,autoOrientation:!0});console.log(t)}}};const $=(0,w.A)(A,[["render",O]]);var S=$,B=o(4232);const I={class:"video-grid"},q=["onClick"],F=["src"],D={class:"video-info"},U={class:"video-name"};function X(e,t,o,n,i,a){return(0,r.uX)(),(0,r.CE)("div",I,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.videos,(e=>((0,r.uX)(),(0,r.CE)("div",{class:"video-item",key:e.name,onClick:t=>a.navigateToVideo(e)},[(0,r.Lk)("img",{src:a.getThumbnail(e),alt:"Video Thumbnail",class:"video-thumbnail"},null,8,F),(0,r.Lk)("div",D,[(0,r.Lk)("h3",U,(0,B.v_)(a.getVideoName(e)),1)])],8,q)))),128))])}var N=o(8355),W={data(){return{videos:[],thumbs:[],host:"https://alpha.jiuxingtang.online/",apiPath:"api/fs/list",currentPath:"/赞美/",indexPath:"/赞美/",picPathPrefix:"https://alpha.jiuxingtang.online/d/tianyi/study"}},watch:{$route:{handler:"resetData",immediate:!0}},mounted(){this.resetData()},methods:{formatDate(e){const t=new Date(e);return t.toLocaleDateString()},scrollToTop(){window.scrollTo({top:0})},resetData(){this.$route.query&&this.$route.query.folder_path?this.currentPath=this.$route.query.folder_path:this.currentPath=this.indexPath;const e={path:this.currentPath,password:"",page:1,per_page:0,refresh:!1};N.A.post(this.host+this.apiPath,e).then((e=>{for(var t=e.data.data.content,o=[],n=[],r=0;r<t.length;r++)(t[r].name.endsWith(".mp4")||t[r].is_dir)&&o.push(t[r]),(t[r].name.endsWith(".jpg")||t[r].name.endsWith(".webp"))&&n.push(t[r]);this.videos=o,this.thumbs=n,console.log("thumbs:"),console.log(n)})).catch((e=>{console.error(e)}))},getThumbnail(e){for(var t=this.getVideoName(e),o="",n=0;n<this.thumbs.length;n++)if(this.thumbs[n].name.includes(t)){o=this.picPathPrefix+this.currentPath+"/"+this.thumbs[n].name;break}return""==o&&(o="https://router.xieru.fun:12315/d/tianyi/projects/thumbs/%E5%AE%89%E9%9D%99%E7%B3%BB%E5%88%97.jpg"),o},getVideoName(e){return e.name.replace(/\.mp4$/,"")},navigateToVideo(e){if(console.log(e),e.is_dir)console.log("xxx"),this.$router.push({name:"VideoGrid",query:{folder_path:this.currentPath+e.name+"/",scrollToTop:!0}});else{console.log("push"),console.log(this.$router);var t=this.picPathPrefix+this.currentPath+"/"+e.name;this.$router.push({name:"VideoPlayer",query:{video:e.name,page:1,video_url:t}})}}}};const H=(0,w.A)(W,[["render",X],["__scopeId","data-v-0ec11b82"]]);var M=H;const z=(0,j.aE)({history:(0,j.LA)(),routes:[{path:"/video",name:"VideoPlayer",component:S,params:!0},{path:"/",name:"VideoGrid",component:M}]});(0,n.Ef)(L).use(z).mount("#app")}},t={};function o(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(i.exports,i,i.exports,o),i.loaded=!0,i.exports}o.m=e,function(){var e=[];o.O=function(t,n,r,i){if(!n){var a=1/0;for(c=0;c<e.length;c++){n=e[c][0],r=e[c][1],i=e[c][2];for(var s=!0,l=0;l<n.length;l++)(!1&i||a>=i)&&Object.keys(o.O).every((function(e){return o.O[e](n[l])}))?n.splice(l--,1):(s=!1,i<a&&(a=i));if(s){e.splice(c--,1);var u=r();void 0!==u&&(t=u)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[n,r,i]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){o.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={524:0};o.O.j=function(t){return 0===e[t]};var t=function(t,n){var r,i,a=n[0],s=n[1],l=n[2],u=0;if(a.some((function(t){return 0!==e[t]}))){for(r in s)o.o(s,r)&&(o.m[r]=s[r]);if(l)var c=l(o)}for(t&&t(n);u<a.length;u++)i=a[u],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return o.O(c)},n=self["webpackChunkworship_video"]=self["webpackChunkworship_video"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=o.O(void 0,[504],(function(){return o(9670)}));n=o.O(n)})();
//# sourceMappingURL=app.24ddb39c.js.map